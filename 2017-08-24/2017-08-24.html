<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>深入理解 bind</title>
</head>
<body>
    <script>
        Function.prototype.bind = function(oThis){
            if(typeof this !== 'function'){
                throw new Error('Function.prototype.bind - what is trying to be bind is not callable');
            }
            var aArgs = Array.prototype.slice.call(arguments,1),
                fToBind = this,
                fNOP = function(){},
                fBound = function(){

                    // fBound.prototype = this instanceof fNOP ? new fNOP() : fBound.prototype
                    // console.log(this)
                    // console.log(this instanceof fNOP)
                    return fToBind.apply(this instanceof fNOP ? this : oThis || this,aArgs.concat(Array.prototype.slice.call(arguments)));
                }
            if(this.prototype){
                fNOP.prototype = this.prototype;
            }
            // fBound.prototype = new fNOP();
            // console.log(fBound);
            return fBound;
        }
        // bind返回的函数在作为构造函数的时候this instanceof fNOP会是true，否则就是false。
        var obj = {
            a:123
        }
        function getA(){
            console.log(this.a)
        }
        var s = getA.bind(obj);
        getA.bind(obj)();
        var c = new s();
        // console.log()
        // c();
    </script>
</body>
</html>
